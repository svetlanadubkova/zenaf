<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zen as fuck | transcendent experience</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            font-family: 'Space Mono', monospace;
            background-color: #000;
            color: #fff;
            overflow: hidden;
            cursor: none;
        }

        #scene-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.5;
        }

        #video-hero {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
            width: 80%;
            max-width: 800px;
        }

        h1 {
            font-size: clamp(3rem, 10vw, 8rem);
            line-height: 1;
            margin-bottom: 1rem;
            text-transform: lowercase;
        }

        h2 {
            font-size: clamp(2rem, 5vw, 4rem);
            margin-bottom: 1rem;
        }

        p {
            font-size: clamp(1rem, 2vw, 1.5rem);
            margin-bottom: 1rem;
        }

        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: transparent;
            color: #fff;
            border: 2px solid #fff;
            text-decoration: none;
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-top: 1rem;
        }

        .btn:hover {
            background-color: #fff;
            color: #000;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .meditation-content {
            background-color: #111;
            padding: 2rem;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
        }

        #visualizer {
            width: 100%;
            height: 100px;
            background-color: #222;
            margin-bottom: 20px;
        }

        #meditationText {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        #questionContainer {
            margin-bottom: 20px;
        }

        #questionContainer input,
        #questionContainer select,
        #questionContainer textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: #222;
            border: none;
            color: #fff;
            font-family: 'Space Mono', monospace;
        }

        .custom-cursor {
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
            transition: transform 0.1s ease;
        }

        .navigation {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
        }

        .nav-dot {
            width: 10px;
            height: 10px;
            background-color: rgba(255,255,255,0.5);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background-color: #fff;
            transform: scale(1.5);
        }

        .newsletter-signup {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .newsletter-signup input {
            padding: 1rem;
            width: 100%;
            max-width: 300px;
            background: transparent;
            border: 2px solid #fff;
            color: #fff;
            font-family: 'Space Mono', monospace;
        }

        .newsletter-signup input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .disclaimer {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 2rem;
        }

        @media (max-width: 768px) {
            .content {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div id="scene-container"></div>
    <div id="video-container">
        <video autoplay muted loop id="video-hero">
            <source src="https://i.imgur.com/vG0sHTA.mp4" type="video/mp4">
        </video>
    </div>
    <div class="custom-cursor"></div>

    <div class="content" id="hero">
        <h1>zen as fuck</h1>
        <p>mindfulness for the modern mess</p>
        <a href="#" class="btn" id="startMeditationBtn">get zen now</a>
    </div>

    <div class="content" id="about">
        <h2>transcend the ordinary</h2>
        <p>no-bs mindfulness meditation</p>
        <p>stress-busting techniques</p>
        <p>laughter-infused relaxation</p>
    </div>

    <div class="content" id="for">
        <h2>designed for:</h2>
        <p>overworked tech bros seeking digital detox</p>
        <p>stressed-out healthcare heroes craving inner peace</p>
        <p>anyone who needs to calm the fuck down and find their zen</p>
    </div>

    <div class="content" id="promise">
        <h2>our fucking promise</h2>
        <p>we cut through the crap and guide you straight to the zen. no crystals, no gongs, just real techniques to help you navigate life's fuckery. discover your inner light, not your last nerve.</p>
    </div>

    <div class="content" id="join">
        <h2>join the zen revolution</h2>
        <p>ready to get zen as fuck? elevate your consciousness and sign up for our free classes and newsletter.</p>
        <div class="newsletter-signup">
            <input type="email" placeholder="your fucking email" required>
            <button class="btn">transcend now</button>
        </div>
        <p class="disclaimer">disclaimer: if you're offended by colorful language, this might not be your cosmic cup of fucking tea.</p>
    </div>

    <div class="navigation">
        <div class="nav-dot" data-index="0"></div>
        <div class="nav-dot" data-index="1"></div>
        <div class="nav-dot" data-index="2"></div>
        <div class="nav-dot" data-index="3"></div>
        <div class="nav-dot" data-index="4"></div>
    </div>

    <div id="meditationOverlay" class="overlay" style="display: none;">
        <div class="meditation-content">
            <h2>Zen AF Meditation</h2>
            <div id="questionContainer"></div>
            <div id="meditationContainer" style="display: none;">
                <canvas id="visualizer"></canvas>
                <div id="meditationText"></div>
                <button id="endMeditation" class="btn">End Meditation</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded and parsed');

        const startButton = document.getElementById('startMeditationBtn');
        const meditationOverlay = document.getElementById('meditationOverlay');
        const questionContainer = document.getElementById('questionContainer');
        const meditationContainer = document.getElementById('meditationContainer');
        const meditationText = document.getElementById('meditationText');
        const endMeditationButton = document.getElementById('endMeditation');
        const sections = document.querySelectorAll('.content');
        const navDots = document.querySelectorAll('.nav-dot');

        console.log('Start button:', startButton);

        if (startButton) {
            startButton.addEventListener('click', startMeditation);
            console.log('Event listener added to start button');
        } else {
            console.error('Start button not found');
        }

        const questions = [
            { id: 'name', text: "What's your name?", type: 'text' },
            { id: 'stress', text: "On a scale of 1-10, how overwhelmed are you right now?", type: 'number', min: 1, max: 10 },
            { id: 'stressType', text: "Is this stress related to work, relationships, or something else?", type: 'select', options: ['Work', 'Relationships', 'Other'] },
            { id: 'situation', text: "What are you currently stressed about? Describe the situation in full and include names and be as specific as possible.", type: 'textarea' },
            { id: 'physical', text: "How are you feeling physically right now?", type: 'text' },
            { id: 'tension', text: "Where do you feel the most tension in your body?", type: 'text' },
            { id: 'time', text: "How much time do you have to calm the fuck down right now?", type: 'select', options: ['5 min', '10 min', '20 min'] },
            { id: 'oneWord', text: "If you could describe your current situation in one word, what would it be?", type: 'text' },
            { id: 'experience', text: "Have you ever meditated before?", type: 'select', options: ['Never', 'A few times', 'Regularly'] }
        ];

        let currentQuestionIndex = 0;
        let userResponses = {};

        if (endMeditationButton) {
            endMeditationButton.addEventListener('click', endMeditation);
        }

        function startMeditation(event) {
            console.log('Start meditation button clicked');
            event.preventDefault();
            meditationOverlay.style.display = 'flex';
            showNextQuestion();
        }

        function showNextQuestion() {
            console.log('Showing next question');
            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                let inputHTML = '';

                switch (question.type) {
                    case 'text':
                    case 'number':
                        inputHTML = `<input type="${question.type}" id="${question.id}" ${question.min ? `min="${question.min}"` : ''} ${question.max ? `max="${question.max}"` : ''}>`;
                        break;
                    case 'select':
                        inputHTML = `<select id="${question.id}">
                            ${question.options.map(option => `<option value="${option}">${option}</option>`).join('')}
                        </select>`;
                        break;
                    case 'textarea':
                        inputHTML = `<textarea id="${question.id}"></textarea>`;
                        break;
                }

                questionContainer.innerHTML = `
                    <h3>${question.text}</h3>
                    ${inputHTML}
                    <button onclick="submitAnswer()" class="btn">Next</button>
                `;
            } else {
                startGuidedMeditation();
            }
        }

        function submitAnswer() {
            console.log('Submitting answer');
            const question = questions[currentQuestionIndex];
            const answer = document.getElementById(question.id).value;
            userResponses[question.id] = answer;
            currentQuestionIndex++;
            showNextQuestion();
        }

        async function startGuidedMeditation() {
            console.log('Starting guided meditation');
            questionContainer.style.display = 'none';
            meditationContainer.style.display = 'block';
            
            try {
                const response = await fetch('https://zenafaiguidedmeditation.onrender.com', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(userResponses)
                });

                if (!response.ok) {
                    throw new Error('Failed to generate meditation');
                }

                const data = await response.json();
                playMeditation(data.meditation);
            } catch (error) {
                console.error('Error generating meditation:', error);
                meditationText.textContent = "Shit, something went wrong. Try again later, or just breathe on your own for a while.";
            }
        }

        function playMeditation(script) {
            console.log('Playing meditation');
            const sentences = script.split('.');
            let currentSentence = 0;

            function displayNextSentence() {
                if (currentSentence < sentences.length) {
                    meditationText.textContent = sentences[currentSentence].trim() + '.';
                    currentSentence++;
                    setTimeout(displayNextSentence, 5000); // Adjust timing as needed
                }
            }

            displayNextSentence();
        }

        function endMeditation() {
            console.log('Ending meditation');
            meditationOverlay.style.display = 'none';
            meditationText.textContent = '';
            questionContainer.style.display = 'block';
            meditationContainer.style.display = 'none';
            currentQuestionIndex = 0;
            userResponses = {};
        }

        function showSection(index) {
            sections.forEach((section, i) => {
                if (i === index) {
                    section.style.opacity = 1;
                } else {
                    section.style.opacity = 0;
                }
            });
            navDots.forEach((dot, i) => {
                if (i === index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        navDots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                showSection(index);
            });
        });

        // Make submitAnswer global so it can be called from HTML
        window.submitAnswer = submitAnswer;

        // Three.js background
        let scene, camera, renderer, particles;

        function initThreeJS() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('scene-container').appendChild(renderer.domElement);

            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 5000; i++) {
                vertices.push(THREE.MathUtils.randFloatSpread(2000));
                vertices.push(THREE.MathUtils.randFloatSpread(2000));
                vertices.push(THREE.MathUtils.randFloatSpread(2000));
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const material = new THREE.PointsMaterial({ color: 0xffffff, size: 3 });
            particles = new THREE.Points(geometry, material);
            scene.add(particles);

            camera.position.z = 500;

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            particles.rotation.x += 0.0001;
            particles.rotation.y += 0.0001;
            renderer.render(scene, camera);
        }

        // Custom cursor
        const cursor = document.querySelector('.custom-cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = `${e.clientX}px`;
            cursor.style.top = `${e.clientY}px`;
        });

        // Initialize
        initThreeJS();
        showSection(0); // Show the first section by default
    });
    </script>
</body>
</html>
